<!doctype html><html class="theme-next mist use-motion" lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css"><meta name="keywords" content="python,matplotlib,"><link rel="alternate" href="/atom.xml" title="Abracadabra" type="application/atom+xml"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0"><meta name="description" content="绘图和可视化12345678910from __future__ import divisionfrom numpy.random import randnimport numpy as npimport osimport matplotlib.pyplot as pltnp.random.seed(12345)plt.rc(&apos;figure&apos;, figsize=(10, 6))from panda"><meta property="og:type" content="article"><meta property="og:title" content="python data analysis learning note ch08"><meta property="og:url" content="http://yoursite.com/2017/03/05/python-data-analysis-learning-note-ch08/index.html"><meta property="og:site_name" content="Abracadabra"><meta property="og:description" content="绘图和可视化12345678910from __future__ import divisionfrom numpy.random import randnimport numpy as npimport osimport matplotlib.pyplot as pltnp.random.seed(12345)plt.rc(&apos;figure&apos;, figsize=(10, 6))from panda"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_10_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_13_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_16_4.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_19_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_21_3.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_24_3.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_26_4.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_28_7.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_29_3.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_31_0.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_40_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_41_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_43_2.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_44_2.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_46_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_48_2.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_51_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_53_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_55_2.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_59_2.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_60_1.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_75_9.png"><meta property="og:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_76_3.png"><meta property="og:updated_time" content="2017-03-05T15:08:37.192Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="python data analysis learning note ch08"><meta name="twitter:description" content="绘图和可视化12345678910from __future__ import divisionfrom numpy.random import randnimport numpy as npimport osimport matplotlib.pyplot as pltnp.random.seed(12345)plt.rc(&apos;figure&apos;, figsize=(10, 6))from panda"><meta name="twitter:image" content="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_10_1.png"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",sidebar:{position:"left",display:"post"},fancybox:!0,motion:!0,duoshuo:{userId:"0",author:"Author"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="http://yoursite.com/2017/03/05/python-data-analysis-learning-note-ch08/"><title>python data analysis learning note ch08 | Abracadabra</title></head><body itemscope itemtype="http://schema.org/WebPage" lang="en"><script type="text/javascript">var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?dc405a79ad500922134d14cdf288f646";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><div class="container one-collumn sidebar-position-left page-post-detail"><div class="headband"></div><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Abracadabra</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Do it yourself</p></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>Categories</a></li><li class="menu-item menu-item-about"><a href="/about" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>About</a></li><li class="menu-item menu-item-archives"><a href="/archives" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>Archives</a></li><li class="menu-item menu-item-tags"><a href="/tags" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i><br>Tags</a></li><li class="menu-item menu-item-sitemap"><a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i><br>Sitemap</a></li><li class="menu-item menu-item-commonweal"><a href="/404.html" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i><br>公益404</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>Search</a></li></ul><div class="site-search"><div class="popup"><span class="search-icon fa fa-search"></span> <input type="text" id="local-search-input"><div id="local-search-result"></div><span class="popup-btn-close">close</span></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><link itemprop="mainEntityOfPage" href="http://yoursite.com/2017/03/05/python-data-analysis-learning-note-ch08/"><span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Ewan Li"><meta itemprop="description" content=""><meta itemprop="image" content="/images/avatar.jpg"></span><span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Abracadabra"><span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject"><img style="display:none" itemprop="url image" alt="Abracadabra" src=""></span></span><header class="post-header"><h1 class="post-title" itemprop="name headline">python data analysis learning note ch08</h1><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-03-05T22:55:28+08:00">2017-03-05 </time></span><span class="post-comments-count"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><a href="/2017/03/05/python-data-analysis-learning-note-ch08/#comments" itemprop="discussionUrl"><span class="post-comments-count hc-comment-count" data-xid="2017/03/05/python-data-analysis-learning-note-ch08/" itemprop="commentsCount"></span> </a></span><span id="/2017/03/05/python-data-analysis-learning-note-ch08/" class="leancloud_visitors" data-flag-title="python data analysis learning note ch08"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-eye"></i> </span><span class="post-meta-item-text">Visitors </span><span class="leancloud-visitors-count"></span></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="绘图和可视化"><a href="#绘图和可视化" class="headerlink" title="绘图和可视化"></a>绘图和可视化</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> __future__ <span class="keyword">import</span> division</div><div class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randn</div><div class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</div><div class="line"><span class="keyword">import</span> os</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line">np.random.seed(<span class="number">12345</span>)</div><div class="line">plt.rc(<span class="string">'figure'</span>, figsize=(<span class="number">10</span>, <span class="number">6</span>))</div><div class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> Series, DataFrame</div><div class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</div><div class="line">np.set_printoptions(precision=<span class="number">4</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> IPython.core.interactiveshell <span class="keyword">import</span> InteractiveShell</div><div class="line">InteractiveShell.ast_node_interactivity = <span class="string">"all"</span></div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">%matplotlib inline</div></pre></td></tr></table></figure><h2 id="matplotlib-API-入门"><a href="#matplotlib-API-入门" class="headerlink" title="matplotlib API 入门"></a>matplotlib API 入门</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div></pre></td></tr></table></figure><h3 id="Figure-和-Subplot"><a href="#Figure-和-Subplot" class="headerlink" title="Figure 和 Subplot"></a>Figure 和 Subplot</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fig = plt.figure()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ax1 = fig.add_subplot(<span class="number">2</span>, <span class="number">2</span>, <span class="number">1</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">ax2 = fig.add_subplot(<span class="number">2</span>, <span class="number">2</span>, <span class="number">2</span>)</div><div class="line">ax3 = fig.add_subplot(<span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> numpy.random <span class="keyword">import</span> randn</div><div class="line">plt.plot(randn(<span class="number">50</span>).cumsum(), <span class="string">'k--'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_10_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">_ = ax1.hist(randn(<span class="number">100</span>), bins=<span class="number">20</span>, color=<span class="string">'k'</span>, alpha=<span class="number">0.3</span>)</div><div class="line">ax2.scatter(np.arange(<span class="number">30</span>), np.arange(<span class="number">30</span>) + <span class="number">3</span> * randn(<span class="number">30</span>))</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.close(<span class="string">'all'</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">3</span>)</div><div class="line">axes</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_13_1.png" alt="png"></p><h4 id="调整subplot周围的间距"><a href="#调整subplot周围的间距" class="headerlink" title="调整subplot周围的间距"></a>调整subplot周围的间距</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">plt.subplots_adjust(left=<span class="keyword">None</span>, bottom=<span class="keyword">None</span>, right=<span class="keyword">None</span>, top=<span class="keyword">None</span>,</div><div class="line">                wspace=<span class="keyword">None</span>, hspace=<span class="keyword">None</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, sharex=<span class="keyword">True</span>, sharey=<span class="keyword">True</span>)</div><div class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">2</span>):</div><div class="line">    <span class="keyword">for</span> j <span class="keyword">in</span> range(<span class="number">2</span>):</div><div class="line">        axes[i, j].hist(randn(<span class="number">500</span>), bins=<span class="number">50</span>, color=<span class="string">'k'</span>, alpha=<span class="number">0.5</span>)</div><div class="line">plt.subplots_adjust(wspace=<span class="number">0</span>, hspace=<span class="number">0</span>)</div></pre></td></tr></table></figure><pre><code>(array([  2.,   0.,   3.,   2.,   1.,   1.,   0.,   3.,   5.,   8.,   9.,
          9.,  10.,  18.,  34.,  13.,  24.,  30.,  24.,  24.,  25.,  20.,
         34.,  20.,  30.,  30.,  19.,  14.,  14.,   8.,  19.,  14.,   7.,
          3.,   7.,   2.,   7.,   2.,   2.,   0.,   1.,   0.,   0.,   0.,
          1.,   0.,   0.,   0.,   0.,   1.]),
 array([-2.9493, -2.8118, -2.6743, -2.5367, -2.3992, -2.2617, -2.1241,
        -1.9866, -1.849 , -1.7115, -1.574 , -1.4364, -1.2989, -1.1614,
        -1.0238, -0.8863, -0.7487, -0.6112, -0.4737, -0.3361, -0.1986,
        -0.0611,  0.0765,  0.214 ,  0.3516,  0.4891,  0.6266,  0.7642,
         0.9017,  1.0392,  1.1768,  1.3143,  1.4519,  1.5894,  1.7269,
         1.8645,  2.002 ,  2.1395,  2.2771,  2.4146,  2.5522,  2.6897,
         2.8272,  2.9648,  3.1023,  3.2398,  3.3774,  3.5149,  3.6525,
         3.79  ,  3.9275]),
 &lt;a list of 50 Patch objects&gt;)






(array([  1.,   1.,   0.,   2.,   0.,   1.,   1.,   5.,   7.,   4.,   5.,
          8.,  12.,  12.,  13.,  15.,  17.,  13.,  22.,  30.,  21.,  24.,
         17.,  20.,  20.,  20.,  18.,  26.,  16.,  24.,  19.,   8.,  14.,
         15.,   7.,  11.,   5.,   4.,   9.,   7.,   6.,   1.,   6.,   2.,
          4.,   2.,   0.,   2.,   1.,   2.]),
 array([-2.595 , -2.4898, -2.3845, -2.2793, -2.1741, -2.0688, -1.9636,
        -1.8584, -1.7531, -1.6479, -1.5427, -1.4374, -1.3322, -1.227 ,
        -1.1217, -1.0165, -0.9112, -0.806 , -0.7008, -0.5955, -0.4903,
        -0.3851, -0.2798, -0.1746, -0.0694,  0.0359,  0.1411,  0.2463,
         0.3516,  0.4568,  0.562 ,  0.6673,  0.7725,  0.8777,  0.983 ,
         1.0882,  1.1935,  1.2987,  1.4039,  1.5092,  1.6144,  1.7196,
         1.8249,  1.9301,  2.0353,  2.1406,  2.2458,  2.351 ,  2.4563,
         2.5615,  2.6667]),
 &lt;a list of 50 Patch objects&gt;)






(array([  1.,   0.,   1.,   0.,   0.,   1.,   0.,   1.,   1.,   0.,   4.,
          1.,   4.,   5.,  11.,   8.,   6.,  11.,  13.,  13.,  17.,  18.,
         20.,  27.,  32.,  29.,  31.,  22.,  21.,  31.,  29.,  19.,  22.,
         18.,  10.,  18.,  11.,  12.,   9.,   6.,   2.,   3.,   3.,   3.,
          2.,   1.,   1.,   1.,   0.,   1.]),
 array([-3.7454, -3.6052, -3.4651, -3.325 , -3.1849, -3.0448, -2.9047,
        -2.7646, -2.6244, -2.4843, -2.3442, -2.2041, -2.064 , -1.9239,
        -1.7837, -1.6436, -1.5035, -1.3634, -1.2233, -1.0832, -0.9431,
        -0.8029, -0.6628, -0.5227, -0.3826, -0.2425, -0.1024,  0.0377,
         0.1779,  0.318 ,  0.4581,  0.5982,  0.7383,  0.8784,  1.0185,
         1.1587,  1.2988,  1.4389,  1.579 ,  1.7191,  1.8592,  1.9994,
         2.1395,  2.2796,  2.4197,  2.5598,  2.6999,  2.84  ,  2.9802,
         3.1203,  3.2604]),
 &lt;a list of 50 Patch objects&gt;)






(array([  1.,   0.,   0.,   1.,   1.,   0.,   0.,   0.,   0.,   1.,   2.,
          5.,   9.,   8.,   6.,   2.,  11.,  17.,  10.,  13.,  10.,  14.,
         12.,  27.,  17.,  28.,  27.,  25.,  14.,  24.,  25.,  38.,  13.,
         24.,  15.,  10.,  17.,  14.,  13.,   8.,   7.,  10.,   3.,   7.,
          2.,   5.,   2.,   0.,   1.,   1.]),
 array([-3.4283, -3.3066, -3.185 , -3.0633, -2.9417, -2.8201, -2.6984,
        -2.5768, -2.4551, -2.3335, -2.2119, -2.0902, -1.9686, -1.847 ,
        -1.7253, -1.6037, -1.482 , -1.3604, -1.2388, -1.1171, -0.9955,
        -0.8739, -0.7522, -0.6306, -0.5089, -0.3873, -0.2657, -0.144 ,
        -0.0224,  0.0993,  0.2209,  0.3425,  0.4642,  0.5858,  0.7074,
         0.8291,  0.9507,  1.0724,  1.194 ,  1.3156,  1.4373,  1.5589,
         1.6806,  1.8022,  1.9238,  2.0455,  2.1671,  2.2887,  2.4104,
         2.532 ,  2.6537]),
 &lt;a list of 50 Patch objects&gt;)
</code></pre><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_16_4.png" alt="png"></p><h3 id="颜色、标记和线型"><a href="#颜色、标记和线型" class="headerlink" title="颜色、标记和线型"></a>颜色、标记和线型</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.figure()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.plot(randn(<span class="number">30</span>).cumsum(), <span class="string">'ko--'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_19_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.close(<span class="string">'all'</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">data = randn(<span class="number">30</span>).cumsum()</div><div class="line">plt.plot(data, <span class="string">'k--'</span>, label=<span class="string">'Default'</span>)</div><div class="line">plt.plot(data, <span class="string">'k-'</span>, drawstyle=<span class="string">'steps-post'</span>, label=<span class="string">'steps-post'</span>)</div><div class="line">plt.legend(loc=<span class="string">'best'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_21_3.png" alt="png"></p><h3 id="刻度、标签和图例"><a href="#刻度、标签和图例" class="headerlink" title="刻度、标签和图例"></a>刻度、标签和图例</h3><h4 id="设置标题、轴标签、刻度以及刻度标签"><a href="#设置标题、轴标签、刻度以及刻度标签" class="headerlink" title="设置标题、轴标签、刻度以及刻度标签"></a>设置标题、轴标签、刻度以及刻度标签</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">fig = plt.figure(); ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line">ax.plot(randn(<span class="number">1000</span>).cumsum())</div><div class="line"></div><div class="line">ticks = ax.set_xticks([<span class="number">0</span>, <span class="number">250</span>, <span class="number">500</span>, <span class="number">750</span>, <span class="number">1000</span>])</div><div class="line">labels = ax.set_xticklabels([<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>],</div><div class="line">                            rotation=<span class="number">30</span>, fontsize=<span class="string">'small'</span>)</div><div class="line">ax.set_title(<span class="string">'My first matplotlib plot'</span>)</div><div class="line">ax.set_xlabel(<span class="string">'Stages'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_24_3.png" alt="png"></p><h4 id="添加图例"><a href="#添加图例" class="headerlink" title="添加图例"></a>添加图例</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">fig = plt.figure(); ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line">ax.plot(randn(<span class="number">1000</span>).cumsum(), <span class="string">'k'</span>, label=<span class="string">'one'</span>)</div><div class="line">ax.plot(randn(<span class="number">1000</span>).cumsum(), <span class="string">'k--'</span>, label=<span class="string">'two'</span>)</div><div class="line">ax.plot(randn(<span class="number">1000</span>).cumsum(), <span class="string">'k.'</span>, label=<span class="string">'three'</span>)</div><div class="line"></div><div class="line">ax.legend(loc=<span class="string">'best'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_26_4.png" alt="png"></p><h3 id="注解以及在subplot上绘图"><a href="#注解以及在subplot上绘图" class="headerlink" title="注解以及在subplot上绘图"></a>注解以及在subplot上绘图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> datetime <span class="keyword">import</span> datetime</div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line"></div><div class="line">data = pd.read_csv(<span class="string">'ch08/spx.csv'</span>, index_col=<span class="number">0</span>, parse_dates=<span class="keyword">True</span>)</div><div class="line">spx = data[<span class="string">'SPX'</span>]</div><div class="line"></div><div class="line">spx.plot(ax=ax, style=<span class="string">'k-'</span>)</div><div class="line"></div><div class="line">crisis_data = [</div><div class="line">    (datetime(<span class="number">2007</span>, <span class="number">10</span>, <span class="number">11</span>), <span class="string">'Peak of bull market'</span>),</div><div class="line">    (datetime(<span class="number">2008</span>, <span class="number">3</span>, <span class="number">12</span>), <span class="string">'Bear Stearns Fails'</span>),</div><div class="line">    (datetime(<span class="number">2008</span>, <span class="number">9</span>, <span class="number">15</span>), <span class="string">'Lehman Bankruptcy'</span>)</div><div class="line">]</div><div class="line"></div><div class="line"><span class="keyword">for</span> date, label <span class="keyword">in</span> crisis_data:</div><div class="line">    ax.annotate(label, xy=(date, spx.asof(date) + <span class="number">50</span>),</div><div class="line">                xytext=(date, spx.asof(date) + <span class="number">200</span>),</div><div class="line">                arrowprops=dict(facecolor=<span class="string">'black'</span>),</div><div class="line">                horizontalalignment=<span class="string">'left'</span>, verticalalignment=<span class="string">'top'</span>)</div><div class="line"></div><div class="line"><span class="comment"># Zoom in on 2007-2010</span></div><div class="line">ax.set_xlim([<span class="string">'1/1/2007'</span>, <span class="string">'1/1/2011'</span>])</div><div class="line">ax.set_ylim([<span class="number">600</span>, <span class="number">1800</span>])</div><div class="line"></div><div class="line">ax.set_title(<span class="string">'Important dates in 2008-2009 financial crisis'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_28_7.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">fig = plt.figure()</div><div class="line">ax = fig.add_subplot(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>)</div><div class="line"></div><div class="line">rect = plt.Rectangle((<span class="number">0.2</span>, <span class="number">0.75</span>), <span class="number">0.4</span>, <span class="number">0.15</span>, color=<span class="string">'k'</span>, alpha=<span class="number">0.3</span>)</div><div class="line">circ = plt.Circle((<span class="number">0.7</span>, <span class="number">0.2</span>), <span class="number">0.15</span>, color=<span class="string">'b'</span>, alpha=<span class="number">0.3</span>)</div><div class="line">pgon = plt.Polygon([[<span class="number">0.15</span>, <span class="number">0.15</span>], [<span class="number">0.35</span>, <span class="number">0.4</span>], [<span class="number">0.2</span>, <span class="number">0.6</span>]],</div><div class="line">                   color=<span class="string">'g'</span>, alpha=<span class="number">0.5</span>)</div><div class="line"></div><div class="line">ax.add_patch(rect)</div><div class="line">ax.add_patch(circ)</div><div class="line">ax.add_patch(pgon)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_29_3.png" alt="png"></p><h3 id="将图表保存到文件"><a href="#将图表保存到文件" class="headerlink" title="将图表保存到文件"></a>将图表保存到文件</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fig</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_31_0.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fig.savefig(<span class="string">'figpath.svg'</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fig.savefig(<span class="string">'figpath.png'</span>, dpi=<span class="number">400</span>, bbox_inches=<span class="string">'tight'</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> io <span class="keyword">import</span> BytesIO</div><div class="line">buffer = BytesIO()</div><div class="line">plt.savefig(buffer)</div><div class="line">plot_data = buffer.getvalue()</div></pre></td></tr></table></figure><pre><code>&lt;matplotlib.figure.Figure at 0xaebe550&gt;
</code></pre><h3 id="matplotlib-配置"><a href="#matplotlib-配置" class="headerlink" title="matplotlib 配置"></a>matplotlib 配置</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.rc(<span class="string">'figure'</span>, figsize=(<span class="number">10</span>, <span class="number">10</span>))</div></pre></td></tr></table></figure><h2 id="pandas中的绘图函数"><a href="#pandas中的绘图函数" class="headerlink" title="pandas中的绘图函数"></a>pandas中的绘图函数</h2><h3 id="线型图"><a href="#线型图" class="headerlink" title="线型图"></a>线型图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.close(<span class="string">'all'</span>)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">s = Series(np.random.randn(<span class="number">10</span>).cumsum(), index=np.arange(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>))</div><div class="line">s.plot()</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_40_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">df = DataFrame(np.random.randn(<span class="number">10</span>, <span class="number">4</span>).cumsum(<span class="number">0</span>),</div><div class="line">               columns=[<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>],</div><div class="line">               index=np.arange(<span class="number">0</span>, <span class="number">100</span>, <span class="number">10</span>))</div><div class="line">df.plot()</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_41_1.png" alt="png"></p><h3 id="柱状图"><a href="#柱状图" class="headerlink" title="柱状图"></a>柱状图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">fig, axes = plt.subplots(<span class="number">2</span>, <span class="number">1</span>)</div><div class="line">data = Series(np.random.rand(<span class="number">16</span>), index=list(<span class="string">'abcdefghijklmnop'</span>))</div><div class="line">data.plot(kind=<span class="string">'bar'</span>, ax=axes[<span class="number">0</span>], color=<span class="string">'k'</span>, alpha=<span class="number">0.7</span>)</div><div class="line">data.plot(kind=<span class="string">'barh'</span>, ax=axes[<span class="number">1</span>], color=<span class="string">'k'</span>, alpha=<span class="number">0.7</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_43_2.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">df = DataFrame(np.random.rand(<span class="number">6</span>, <span class="number">4</span>),</div><div class="line">               index=[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>, <span class="string">'five'</span>, <span class="string">'six'</span>],</div><div class="line">               columns=pd.Index([<span class="string">'A'</span>, <span class="string">'B'</span>, <span class="string">'C'</span>, <span class="string">'D'</span>], name=<span class="string">'Genus'</span>))</div><div class="line">df</div><div class="line">df.plot(kind=<span class="string">'bar'</span>)</div></pre></td></tr></table></figure><div><br><table border="1" class="dataframe"><br><thead><br><br><tr style="text-align:right"><br><th>Genus</th><br><th>A</th><br><th>B</th><br><th>C</th><br><th>D</th><br></tr><br><br></thead><br><tbody><br><br><tr><br><th>one</th><br><td>0.301686</td><br><td>0.156333</td><br><td>0.371943</td><br><td>0.270731</td><br></tr><br><tr><br><th>two</th><br><td>0.750589</td><br><td>0.525587</td><br><td>0.689429</td><br><td>0.358974</td><br></tr><br><tr><br><th>three</th><br><td>0.381504</td><br><td>0.667707</td><br><td>0.473772</td><br><td>0.632528</td><br></tr><br><tr><br><th>four</th><br><td>0.942408</td><br><td>0.180186</td><br><td>0.708284</td><br><td>0.641783</td><br></tr><br><tr><br><th>five</th><br><td>0.840278</td><br><td>0.909589</td><br><td>0.010041</td><br><td>0.653207</td><br></tr><br><tr><br><th>six</th><br><td>0.062854</td><br><td>0.589813</td><br><td>0.811318</td><br><td>0.060217</td><br></tr><br><br></tbody><br></table><br></div><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_44_2.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.figure()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">df.plot(kind=<span class="string">'barh'</span>, stacked=<span class="keyword">True</span>, alpha=<span class="number">0.5</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_46_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">tips = pd.read_csv(<span class="string">'ch08/tips.csv'</span>)</div><div class="line">party_counts = pd.crosstab(tips.day, tips.size_)</div><div class="line">party_counts</div><div class="line"><span class="comment"># Not many 1- and 6-person parties</span></div><div class="line">party_counts = party_counts.ix[:, <span class="number">2</span>:<span class="number">5</span>]</div><div class="line">party_counts</div></pre></td></tr></table></figure><div><br><table border="1" class="dataframe"><br><thead><br><br><tr style="text-align:right"><br><th>size_</th><br><th>1</th><br><th>2</th><br><th>3</th><br><th>4</th><br><th>5</th><br><th>6</th><br></tr><br><tr><br><th>day</th><br><th></th><br><th></th><br><th></th><br><th></th><br><th></th><br><th></th><br></tr><br><br></thead><br><tbody><br><br><tr><br><th>Fri</th><br><td>1</td><br><td>16</td><br><td>1</td><br><td>1</td><br><td>0</td><br><td>0</td><br></tr><br><tr><br><th>Sat</th><br><td>2</td><br><td>53</td><br><td>18</td><br><td>13</td><br><td>1</td><br><td>0</td><br></tr><br><tr><br><th>Sun</th><br><td>0</td><br><td>39</td><br><td>15</td><br><td>18</td><br><td>3</td><br><td>1</td><br></tr><br><tr><br><th>Thur</th><br><td>1</td><br><td>48</td><br><td>4</td><br><td>5</td><br><td>1</td><br><td>3</td><br></tr><br><br></tbody><br></table><br></div><div><br><table border="1" class="dataframe"><br><thead><br><br><tr style="text-align:right"><br><th>size_</th><br><th>2</th><br><th>3</th><br><th>4</th><br><th>5</th><br></tr><br><tr><br><th>day</th><br><th></th><br><th></th><br><th></th><br><th></th><br></tr><br><br></thead><br><tbody><br><br><tr><br><th>Fri</th><br><td>16</td><br><td>1</td><br><td>1</td><br><td>0</td><br></tr><br><tr><br><th>Sat</th><br><td>53</td><br><td>18</td><br><td>13</td><br><td>1</td><br></tr><br><tr><br><th>Sun</th><br><td>39</td><br><td>15</td><br><td>18</td><br><td>3</td><br></tr><br><tr><br><th>Thur</th><br><td>48</td><br><td>4</td><br><td>5</td><br><td>1</td><br></tr><br><br></tbody><br></table><br></div><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># Normalize to sum to 1</span></div><div class="line">party_pcts = party_counts.div(party_counts.sum(<span class="number">1</span>).astype(float), axis=<span class="number">0</span>)</div><div class="line">party_pcts</div><div class="line"></div><div class="line">party_pcts.plot(kind=<span class="string">'bar'</span>, stacked=<span class="keyword">True</span>)</div></pre></td></tr></table></figure><div><br><table border="1" class="dataframe"><br><thead><br><br><tr style="text-align:right"><br><th>size_</th><br><th>2</th><br><th>3</th><br><th>4</th><br><th>5</th><br></tr><br><tr><br><th>day</th><br><th></th><br><th></th><br><th></th><br><th></th><br></tr><br><br></thead><br><tbody><br><br><tr><br><th>Fri</th><br><td>0.888889</td><br><td>0.055556</td><br><td>0.055556</td><br><td>0.000000</td><br></tr><br><tr><br><th>Sat</th><br><td>0.623529</td><br><td>0.211765</td><br><td>0.152941</td><br><td>0.011765</td><br></tr><br><tr><br><th>Sun</th><br><td>0.520000</td><br><td>0.200000</td><br><td>0.240000</td><br><td>0.040000</td><br></tr><br><tr><br><th>Thur</th><br><td>0.827586</td><br><td>0.068966</td><br><td>0.086207</td><br><td>0.017241</td><br></tr><br><br></tbody><br></table><br></div><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_48_2.png" alt="png"></p><h3 id="直方图和密度图"><a href="#直方图和密度图" class="headerlink" title="直方图和密度图"></a>直方图和密度图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.figure()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">tips[<span class="string">'tip_pct'</span>] = tips[<span class="string">'tip'</span>] / tips[<span class="string">'total_bill'</span>]</div><div class="line">tips[<span class="string">'tip_pct'</span>].hist(bins=<span class="number">50</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_51_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.figure()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">tips[<span class="string">'tip_pct'</span>].plot(kind=<span class="string">'kde'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_53_1.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.figure()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">comp1 = np.random.normal(<span class="number">0</span>, <span class="number">1</span>, size=<span class="number">200</span>)  <span class="comment"># N(0, 1)</span></div><div class="line">comp2 = np.random.normal(<span class="number">10</span>, <span class="number">2</span>, size=<span class="number">200</span>)  <span class="comment"># N(10, 4)</span></div><div class="line">values = Series(np.concatenate([comp1, comp2]))</div><div class="line">values.hist(bins=<span class="number">100</span>, alpha=<span class="number">0.3</span>, color=<span class="string">'k'</span>, normed=<span class="keyword">True</span>)</div><div class="line">values.plot(kind=<span class="string">'kde'</span>, style=<span class="string">'k--'</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_55_2.png" alt="png"></p><h3 id="散点图"><a href="#散点图" class="headerlink" title="散点图"></a>散点图</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">macro = pd.read_csv(<span class="string">'ch08/macrodata.csv'</span>)</div><div class="line">data = macro[[<span class="string">'cpi'</span>, <span class="string">'m1'</span>, <span class="string">'tbilrate'</span>, <span class="string">'unemp'</span>]]</div><div class="line">trans_data = np.log(data).diff().dropna()</div><div class="line">trans_data[<span class="number">-5</span>:]</div></pre></td></tr></table></figure><div><br><table border="1" class="dataframe"><br><thead><br><br><tr style="text-align:right"><br><th></th><br><th>cpi</th><br><th>m1</th><br><th>tbilrate</th><br><th>unemp</th><br></tr><br><br></thead><br><tbody><br><br><tr><br><th>198</th><br><td>-0.007904</td><br><td>0.045361</td><br><td>-0.396881</td><br><td>0.105361</td><br></tr><br><tr><br><th>199</th><br><td>-0.021979</td><br><td>0.066753</td><br><td>-2.277267</td><br><td>0.139762</td><br></tr><br><tr><br><th>200</th><br><td>0.002340</td><br><td>0.010286</td><br><td>0.606136</td><br><td>0.160343</td><br></tr><br><tr><br><th>201</th><br><td>0.008419</td><br><td>0.037461</td><br><td>-0.200671</td><br><td>0.127339</td><br></tr><br><tr><br><th>202</th><br><td>0.008894</td><br><td>0.012202</td><br><td>-0.405465</td><br><td>0.042560</td><br></tr><br><br></tbody><br></table><br></div><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">plt.figure()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">plt.scatter(trans_data[<span class="string">'m1'</span>], trans_data[<span class="string">'unemp'</span>])</div><div class="line">plt.title(<span class="string">'Changes in log %s vs. log %s'</span> % (<span class="string">'m1'</span>, <span class="string">'unemp'</span>))</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_59_2.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">pd.scatter_matrix(trans_data, diagonal=<span class="string">'kde'</span>, c=<span class="string">'k'</span>, alpha=<span class="number">0.3</span>)</div></pre></td></tr></table></figure><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_60_1.png" alt="png"></p><h2 id="绘制地图：图形化显示海底地震危机数据"><a href="#绘制地图：图形化显示海底地震危机数据" class="headerlink" title="绘制地图：图形化显示海底地震危机数据"></a>绘制地图：图形化显示海底地震危机数据</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">data = pd.read_csv(<span class="string">'ch08/Haiti.csv'</span>)</div><div class="line">data.info()</div></pre></td></tr></table></figure><pre><code>&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;
RangeIndex: 3593 entries, 0 to 3592
Data columns (total 10 columns):
Serial            3593 non-null int64
INCIDENT TITLE    3593 non-null object
INCIDENT DATE     3593 non-null object
LOCATION          3592 non-null object
DESCRIPTION       3593 non-null object
CATEGORY          3587 non-null object
LATITUDE          3593 non-null float64
LONGITUDE         3593 non-null float64
APPROVED          3593 non-null object
VERIFIED          3593 non-null object
dtypes: float64(2), int64(1), object(7)
memory usage: 280.8+ KB
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data[[<span class="string">'INCIDENT DATE'</span>, <span class="string">'LATITUDE'</span>, <span class="string">'LONGITUDE'</span>]][:<span class="number">10</span>]</div></pre></td></tr></table></figure><div><br><table border="1" class="dataframe"><br><thead><br><br><tr style="text-align:right"><br><th></th><br><th>INCIDENT DATE</th><br><th>LATITUDE</th><br><th>LONGITUDE</th><br></tr><br><br></thead><br><tbody><br><br><tr><br><th>0</th><br><td>05/07/2010 17:26</td><br><td>18.233333</td><br><td>-72.533333</td><br></tr><br><tr><br><th>1</th><br><td>28/06/2010 23:06</td><br><td>50.226029</td><br><td>5.729886</td><br></tr><br><tr><br><th>2</th><br><td>24/06/2010 16:21</td><br><td>22.278381</td><br><td>114.174287</td><br></tr><br><tr><br><th>3</th><br><td>20/06/2010 21:59</td><br><td>44.407062</td><br><td>8.933989</td><br></tr><br><tr><br><th>4</th><br><td>18/05/2010 16:26</td><br><td>18.571084</td><br><td>-72.334671</td><br></tr><br><tr><br><th>5</th><br><td>26/04/2010 13:14</td><br><td>18.593707</td><br><td>-72.310079</td><br></tr><br><tr><br><th>6</th><br><td>26/04/2010 14:19</td><br><td>18.482800</td><br><td>-73.638800</td><br></tr><br><tr><br><th>7</th><br><td>26/04/2010 14:27</td><br><td>18.415000</td><br><td>-73.195000</td><br></tr><br><tr><br><th>8</th><br><td>15/03/2010 10:58</td><br><td>18.517443</td><br><td>-72.236841</td><br></tr><br><tr><br><th>9</th><br><td>15/03/2010 11:00</td><br><td>18.547790</td><br><td>-72.410010</td><br></tr><br><br></tbody><br></table><br></div><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data[<span class="string">'CATEGORY'</span>][:<span class="number">6</span>]</div></pre></td></tr></table></figure><pre><code>0          1. Urgences | Emergency, 3. Public Health, 
1    1. Urgences | Emergency, 2. Urgences logistiqu...
2    2. Urgences logistiques | Vital Lines, 8. Autr...
3                            1. Urgences | Emergency, 
4                            1. Urgences | Emergency, 
5                       5e. Communication lines down, 
Name: CATEGORY, dtype: object
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data.describe()</div></pre></td></tr></table></figure><div><br><table border="1" class="dataframe"><br><thead><br><br><tr style="text-align:right"><br><th></th><br><th>Serial</th><br><th>LATITUDE</th><br><th>LONGITUDE</th><br></tr><br><br></thead><br><tbody><br><br><tr><br><th>count</th><br><td>3593.000000</td><br><td>3593.000000</td><br><td>3593.000000</td><br></tr><br><tr><br><th>mean</th><br><td>2080.277484</td><br><td>18.611495</td><br><td>-72.322680</td><br></tr><br><tr><br><th>std</th><br><td>1171.100360</td><br><td>0.738572</td><br><td>3.650776</td><br></tr><br><tr><br><th>min</th><br><td>4.000000</td><br><td>18.041313</td><br><td>-74.452757</td><br></tr><br><tr><br><th>25%</th><br><td>1074.000000</td><br><td>18.524070</td><br><td>-72.417500</td><br></tr><br><tr><br><th>50%</th><br><td>2163.000000</td><br><td>18.539269</td><br><td>-72.335000</td><br></tr><br><tr><br><th>75%</th><br><td>3088.000000</td><br><td>18.561820</td><br><td>-72.293570</td><br></tr><br><tr><br><th>max</th><br><td>4052.000000</td><br><td>50.226029</td><br><td>114.174287</td><br></tr><br><br></tbody><br></table><br></div><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">data = data[(data.LATITUDE &gt; <span class="number">18</span>) &amp; (data.LATITUDE &lt; <span class="number">20</span>) &amp;</div><div class="line">            (data.LONGITUDE &gt; <span class="number">-75</span>) &amp; (data.LONGITUDE &lt; <span class="number">-70</span>)</div><div class="line">            &amp; data.CATEGORY.notnull()]</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">to_cat_list</span><span class="params">(catstr)</span>:</span></div><div class="line">    stripped = (x.strip() <span class="keyword">for</span> x <span class="keyword">in</span> catstr.split(<span class="string">','</span>))</div><div class="line">    <span class="keyword">return</span> [x <span class="keyword">for</span> x <span class="keyword">in</span> stripped <span class="keyword">if</span> x]</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_all_categories</span><span class="params">(cat_series)</span>:</span></div><div class="line">    cat_sets = (set(to_cat_list(x)) <span class="keyword">for</span> x <span class="keyword">in</span> cat_series)</div><div class="line">    <span class="keyword">return</span> sorted(set.union(*cat_sets))</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_english</span><span class="params">(cat)</span>:</span></div><div class="line">    code, names = cat.split(<span class="string">'.'</span>)</div><div class="line">    <span class="keyword">if</span> <span class="string">'|'</span> <span class="keyword">in</span> names:</div><div class="line">        names = names.split(<span class="string">' | '</span>)[<span class="number">1</span>]</div><div class="line">    <span class="keyword">return</span> code, names.strip()</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">get_english(<span class="string">'2. Urgences logistiques | Vital Lines'</span>)</div></pre></td></tr></table></figure><pre><code>(&apos;2&apos;, &apos;Vital Lines&apos;)
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">all_cats = get_all_categories(data.CATEGORY)</div><div class="line"><span class="comment"># Generator expression</span></div><div class="line">english_mapping = dict(get_english(x) <span class="keyword">for</span> x <span class="keyword">in</span> all_cats)</div><div class="line">english_mapping[<span class="string">'2a'</span>]</div><div class="line">english_mapping[<span class="string">'6c'</span>]</div></pre></td></tr></table></figure><pre><code>&apos;Food Shortage&apos;






&apos;Earthquake and aftershocks&apos;
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_code</span><span class="params">(seq)</span>:</span></div><div class="line">    <span class="keyword">return</span> [x.split(<span class="string">'.'</span>)[<span class="number">0</span>] <span class="keyword">for</span> x <span class="keyword">in</span> seq <span class="keyword">if</span> x]</div><div class="line"></div><div class="line">all_codes = get_code(all_cats)</div><div class="line">code_index = pd.Index(np.unique(all_codes))</div><div class="line">dummy_frame = DataFrame(np.zeros((len(data), len(code_index))),</div><div class="line">                        index=data.index, columns=code_index)</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dummy_frame.ix[:, :<span class="number">6</span>].info()</div></pre></td></tr></table></figure><pre><code>&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;
Int64Index: 3569 entries, 0 to 3592
Data columns (total 6 columns):
1     3569 non-null float64
1a    3569 non-null float64
1b    3569 non-null float64
1c    3569 non-null float64
1d    3569 non-null float64
2     3569 non-null float64
dtypes: float64(6)
memory usage: 195.2 KB
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> row, cat <span class="keyword">in</span> zip(data.index, data.CATEGORY):</div><div class="line">    codes = get_code(to_cat_list(cat))</div><div class="line">    dummy_frame.ix[row, codes] = <span class="number">1</span></div><div class="line"></div><div class="line">data = data.join(dummy_frame.add_prefix(<span class="string">'category_'</span>))</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">data.ix[:, <span class="number">10</span>:<span class="number">15</span>].info()</div></pre></td></tr></table></figure><pre><code>&lt;class &apos;pandas.core.frame.DataFrame&apos;&gt;
Int64Index: 3569 entries, 0 to 3592
Data columns (total 5 columns):
category_1     3569 non-null float64
category_1a    3569 non-null float64
category_1b    3569 non-null float64
category_1c    3569 non-null float64
category_1d    3569 non-null float64
dtypes: float64(5)
memory usage: 167.3 KB
</code></pre><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">from</span> mpl_toolkits.basemap <span class="keyword">import</span> Basemap</div><div class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">basic_haiti_map</span><span class="params">(ax=None, lllat=<span class="number">17.25</span>, urlat=<span class="number">20.25</span>,</span></span></div><div class="line">                    lllon=<span class="number">-75</span>, urlon=<span class="number">-71</span>):</div><div class="line">    <span class="comment"># create polar stereographic Basemap instance.</span></div><div class="line">    m = Basemap(ax=ax, projection=<span class="string">'stere'</span>,</div><div class="line">                lon_0=(urlon + lllon) / <span class="number">2</span>,</div><div class="line">                lat_0=(urlat + lllat) / <span class="number">2</span>,</div><div class="line">                llcrnrlat=lllat, urcrnrlat=urlat,</div><div class="line">                llcrnrlon=lllon, urcrnrlon=urlon,</div><div class="line">                resolution=<span class="string">'f'</span>)</div><div class="line">    <span class="comment"># draw coastlines, state and country boundaries, edge of map.</span></div><div class="line">    m.drawcoastlines()</div><div class="line">    m.drawstates()</div><div class="line">    m.drawcountries()</div><div class="line">    <span class="keyword">return</span> m</div></pre></td></tr></table></figure><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">fig, axes = plt.subplots(nrows=<span class="number">2</span>, ncols=<span class="number">2</span>, figsize=(<span class="number">12</span>, <span class="number">10</span>))</div><div class="line">fig.subplots_adjust(hspace=<span class="number">0.05</span>, wspace=<span class="number">0.05</span>)</div><div class="line"></div><div class="line">to_plot = [<span class="string">'2a'</span>, <span class="string">'1'</span>, <span class="string">'3c'</span>, <span class="string">'7a'</span>]</div><div class="line"></div><div class="line">lllat=<span class="number">17.25</span>; urlat=<span class="number">20.25</span>; lllon=<span class="number">-75</span>; urlon=<span class="number">-71</span></div><div class="line"></div><div class="line"><span class="keyword">for</span> code, ax <span class="keyword">in</span> zip(to_plot, axes.flat):</div><div class="line">    m = basic_haiti_map(ax, lllat=lllat, urlat=urlat,</div><div class="line">                        lllon=lllon, urlon=urlon)</div><div class="line"></div><div class="line">    cat_data = data[data[<span class="string">'category_%s'</span> % code] == <span class="number">1</span>]</div><div class="line"></div><div class="line">    <span class="comment"># compute map proj coordinates.</span></div><div class="line">    x, y = m(cat_data.LONGITUDE.values, cat_data.LATITUDE.values)</div><div class="line"></div><div class="line">    m.plot(x, y, <span class="string">'k.'</span>, alpha=<span class="number">0.5</span>)</div><div class="line">    ax.set_title(<span class="string">'%s: %s'</span> % (code, english_mapping[code]))</div></pre></td></tr></table></figure><pre><code>C:\Users\Ewan\Anaconda3\envs\ipykernel_py2\lib\site-packages\mpl_toolkits\basemap\__init__.py:3260: MatplotlibDeprecationWarning: The ishold function was deprecated in version 2.0.
  b = ax.ishold()
C:\Users\Ewan\Anaconda3\envs\ipykernel_py2\lib\site-packages\mpl_toolkits\basemap\__init__.py:3269: MatplotlibDeprecationWarning: axes.hold is deprecated.
    See the API Changes document (http://matplotlib.org/api/api_changes.html)
    for more details.
  ax.hold(b)
</code></pre><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_75_9.png" alt="png"></p><figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#街道数据的路径</span></div><div class="line">shapefilepath = <span class="string">'ch08/PortAuPrince_Roads/PortAuPrince_Roads'</span></div><div class="line"></div><div class="line">fig = plt.figure()</div><div class="line">ax = fig.add_subplot(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)</div><div class="line"></div><div class="line">lat0 = <span class="number">18.533333</span>;lon0 = <span class="number">-72.333333</span>;change = <span class="number">0.13</span>;</div><div class="line">lllat=lat0-change; urlat=lat0+change; lllon=lon0-change; urlon=lon0+change;</div><div class="line"></div><div class="line">m = basic_haiti_map(ax, lllat=lllat, urlat=urlat,lllon=lllon, urlon=urlon)</div><div class="line"></div><div class="line">m.readshapefile(shapefilepath,<span class="string">'roads'</span>) <span class="comment">#添加街道数据</span></div><div class="line"></div><div class="line">code = <span class="string">'2a'</span></div><div class="line">cat_data = data[data[<span class="string">'category_%s'</span> % code] == <span class="number">1</span>]</div><div class="line"></div><div class="line"><span class="comment"># compute map proj coordinates.</span></div><div class="line">x, y = m(cat_data.LONGITUDE.values, cat_data.LATITUDE.values)</div><div class="line"></div><div class="line">m.plot(x, y, <span class="string">'k.'</span>, alpha=<span class="number">0.5</span>)</div><div class="line">ax.set_title(<span class="string">'Food shortages reported in Port-au-Prince'</span>)</div><div class="line"><span class="comment"># plt.savefig('myfig.png',dpi=400,bbox_inches='tight')</span></div></pre></td></tr></table></figure><pre><code>(1583,
 3,
 [-72.749246, 18.409952, 0.0, 0.0],
 [-71.973789, 18.7147105, 0.0, 0.0],
</code></pre><p><img src="http://o7ie0tcjk.bkt.clouddn.com/pydata/ch08/output_76_3.png" alt="png"></p></div><div></div><div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/python/" rel="tag"># python</a> <a href="/tags/matplotlib/" rel="tag"># matplotlib</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/2017/03/05/cs231n-Assignment-1-softmax/" rel="next" title="cs231n Assignment#1 softmax"><i class="fa fa-chevron-left"></i> cs231n Assignment#1 softmax</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/2017/03/06/cs231n-Lecture4-note/" rel="prev" title="cs231n Lecture4 note">cs231n Lecture4 note <i class="fa fa-chevron-right"></i></a></div></div></footer></article><div class="post-spread"><div class="addthis_inline_share_toolbox"><script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-58f731508143741d" async></script></div></div></div></div><div class="comments" id="comments"><div id="hypercomments_widget"></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">Table of Contents</li><li class="sidebar-nav-overview" data-target="site-overview">Overview</li></ul><section class="site-overview sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/avatar.jpg" alt="Ewan Li"><p class="site-author-name" itemprop="name">Ewan Li</p><p class="site-description motion-element" itemprop="description">Ewan's IT Blog</p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives"><span class="site-state-item-count">121</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-tags"><a href="/tags"><span class="site-state-item-count">58</span> <span class="site-state-item-name">tags</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/ewanlee" target="_blank" title="Github"><i class="fa fa-fw fa-globe"></i> Github </a></span><span class="links-of-author-item"><a href="http://weibo.com/3946248928/profile?topnav=1&wvr=6" target="_blank" title="Weibo"><i class="fa fa-fw fa-weibo"></i> Weibo</a></span></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#绘图和可视化"><span class="nav-number">1.</span> <span class="nav-text">绘图和可视化</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#matplotlib-API-入门"><span class="nav-number">1.1.</span> <span class="nav-text">matplotlib API 入门</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Figure-和-Subplot"><span class="nav-number">1.1.1.</span> <span class="nav-text">Figure 和 Subplot</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#调整subplot周围的间距"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">调整subplot周围的间距</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#颜色、标记和线型"><span class="nav-number">1.1.2.</span> <span class="nav-text">颜色、标记和线型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#刻度、标签和图例"><span class="nav-number">1.1.3.</span> <span class="nav-text">刻度、标签和图例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#设置标题、轴标签、刻度以及刻度标签"><span class="nav-number">1.1.3.1.</span> <span class="nav-text">设置标题、轴标签、刻度以及刻度标签</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#添加图例"><span class="nav-number">1.1.3.2.</span> <span class="nav-text">添加图例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注解以及在subplot上绘图"><span class="nav-number">1.1.4.</span> <span class="nav-text">注解以及在subplot上绘图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#将图表保存到文件"><span class="nav-number">1.1.5.</span> <span class="nav-text">将图表保存到文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#matplotlib-配置"><span class="nav-number">1.1.6.</span> <span class="nav-text">matplotlib 配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pandas中的绘图函数"><span class="nav-number">1.2.</span> <span class="nav-text">pandas中的绘图函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#线型图"><span class="nav-number">1.2.1.</span> <span class="nav-text">线型图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#柱状图"><span class="nav-number">1.2.2.</span> <span class="nav-text">柱状图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#直方图和密度图"><span class="nav-number">1.2.3.</span> <span class="nav-text">直方图和密度图</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#散点图"><span class="nav-number">1.2.4.</span> <span class="nav-text">散点图</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#绘制地图：图形化显示海底地震危机数据"><span class="nav-number">1.3.</span> <span class="nav-text">绘制地图：图形化显示海底地震危机数据</span></a></li></ol></li></ol></div></div></section></div></aside></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2018</span> <span class="with-love"><i class="fa fa-heart"></i> </span><span class="author" itemprop="copyrightHolder">Ewan Li</span></div><div class="powered-by">Powered by <a class="theme-link" href="https://hexo.io">Hexo</a></div><div class="theme-info">Theme - <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a></div><div class="busuanzi-count"><script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user">本站访客数</i><span class="busuanzi-value" id="busuanzi_value_site_uv"></span>人次</span> <span class="site-pv"><i class="fa fa-eye">本站总访问量</i><span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span></div></div></footer><div class="back-to-top"><i class="fa fa-arrow-up"></i></div></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script><script type="text/javascript">_hcwp=window._hcwp||[],_hcwp.push({widget:"Bloggerstream",widget_id:89825,selector:".hc-comment-count",label:"{%COUNT%}"}),_hcwp.push({widget:"Stream",widget_id:89825,xid:"2017/03/05/python-data-analysis-learning-note-ch08/"}),function(){if(!("HC_LOAD_INIT"in window)){HC_LOAD_INIT=!0;var t=(navigator.language||navigator.systemLanguage||navigator.userLanguage||"en").substr(0,2).toLowerCase(),e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"https":"http")+"://w.hypercomments.com/widget/hc/89825/"+t+"/widget.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(e,a.nextSibling)}}()</script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}var isfetched=!1,search_path="search.xml";0==search_path.length&&(search_path="search.xml");var path="/"+search_path,searchFunc=function(e,t,a){"use strict";$.ajax({url:e,dataType:"xml",async:!0,success:function(e){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var r=$("entry",e).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),c=document.getElementById(t),n=document.getElementById(a);c.addEventListener("input",function(){var e=0,t='<ul class="search-result-list">',a=this.value.trim().toLowerCase().split(/[\s\-]+/);n.innerHTML="",this.value.trim().length>1&&r.forEach(function(r){var c=!1,n=r.title.trim().toLowerCase(),s=r.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=decodeURIComponent(r.url),i=-1,l=-1,p=-1;if(""!=n&&a.forEach(function(e,t){i=n.indexOf(e),l=s.indexOf(e),(i>=0||l>=0)&&(c=!0,0==t&&(p=l))}),c){e+=1,t+="<li><a href='"+o+"' class='search-result-title'>"+n+"</a>";var h=r.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var u=p-20,d=p+80;u<0&&(u=0),0==u&&(d=50),d>h.length&&(d=h.length);var f=h.substring(u,d);a.forEach(function(e){var t=new RegExp(e,"gi");f=f.replace(t,'<b class="search-keyword">'+e+"</b>")}),t+='<p class="search-result">'+f+"...</p>"}t+="</li>"}}),t+="</ul>",0==e&&(t='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==a&&(t='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),n.innerHTML=t}),proceedsearch()}})};$(".popup-trigger").click(function(e){e.stopPropagation(),0==isfetched?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})</script><script type="text/x-mathjax-config">MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
        }
      });</script><script type="text/x-mathjax-config">MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
        }
      });</script><script type="text/javascript" src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script><script>AV.initialize("e27VKX5tTklQLCtF7iNMmhcA-gzGzoHsz","nnQn2znNgXXEdK7W2bVJ3bfK")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0===e.length)return void o.find(t).text(0);for(var i=0;i<e.length;i++){var r=e[i],s=r.get("url"),l=r.get("time"),c=document.getElementById(s);$(c).find(t).text(l)}for(var i=0;i<n.length;i++){var s=n[i],c=document.getElementById(s),u=$(c).find(t);""==u.text()&&u.text(0)}}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script></body></html>